<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日期換算工具 - UNCLE FAT'S TOOL BOX</title>    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="navbar">
        <a href="index.html" class="navbar-brand">UNCLE FAT'S TOOL BOX</a>
    </nav>

    <div class="container">
        <h1>日期換算工具</h1>

        <div class="calculator-section">
            <h2>計算天數差異</h2>
            <div class="form-group">
                <label for="startDate">開始日期</label>
                <input type="date" id="startDate">
            </div>
            <div class="form-group">
                <label for="endDate">結束日期</label>
                <input type="date" id="endDate">
            </div>
            <button id="calculateBtn">計算</button>
            <p id="result"></p>
        </div>

        <div class="lunar-section">
            <h2>今日農曆</h2>
            <p id="lunar-date"></p>
        </div>
    </div>

    <!-- 移除原本的 <script src="...lunar-javascript" defer></script> 和內嵌 defer 腳本，改用 module import -->
    <script type="module">
    import { Lunar } from 'https://cdn.jsdelivr.net/npm/lunar-javascript/dist/index.esm.js';

    // 計算天數差異
    const calculateBtn = document.getElementById('calculateBtn');
    calculateBtn.addEventListener('click', () => {
        const startDate = document.getElementById('startDate').value;
        const endDate = document.getElementById('endDate').value;
        const resultEl = document.getElementById('result');

        if (startDate && endDate) {
            const start = new Date(startDate);
            const end = new Date(endDate);
            const timeDiff = end.getTime() - start.getTime();
            const dayDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            resultEl.textContent = `兩個日期之間相差 ${dayDiff} 天。`;
        } else {
            resultEl.textContent = '請選擇開始和結束日期。';
        }
    });

    // 顯示今日農曆
    const lunarDateEl = document.getElementById('lunar-date');
    const today = new Date();
    const lunar = Lunar.fromDate(today);
    lunarDateEl.textContent = `今天是農曆 ${lunar.getYearInChinese()}年 (${lunar.getYearZodiac()}年) ${lunar.getMonthInChinese()}月${lunar.getDayInChinese()}。`;
    </script>

</body>
</html>